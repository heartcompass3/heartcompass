---
const navItems = [
  { label: 'ראשי', href: '/' },
  { label: 'מי אני', href: '/about' },
  { label: 'מאמרים', href: '/blog' },
  { label: 'צור קשר', href: '/contact' },
];

const methodItems = [
  { label: 'אימון זוגי בשיטת מ.ס.ע', href: '/method/couples' },
  { label: 'קריירה ועסקים בשיטת מ.ס.ע', href: '/method/career' },
  { label: 'התפתחות אישית בשיטת מ.ס.ע', href: '/method/personal' },
];
---

<nav class="sticky top-0 z-[100] bg-base/95 backdrop-blur-md border-b border-accent/20 shadow-sm w-full">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="flex justify-between items-center h-20 md:h-24">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-4 group focus:outline-none" aria-label="חזרה לדף הבית">
        <div class="relative w-12 h-12 md:w-14 md:h-14 shrink-0 transition-transform duration-500 group-hover:rotate-[30deg]">
          <div class="w-full h-full rounded-full bg-gradient-to-br from-accent to-accent2 flex items-center justify-center p-[2px] shadow-lg">
            <div class="w-full h-full rounded-full bg-primary flex items-center justify-center border border-accent/30">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" class="text-accent drop-shadow-md">
                <path d="M12 22c4.418 0 8-3.582 8-8 0-5-4-10-8-12C8 4 4 9 4 14c0 4.418 3.582 8 8 8Z" stroke="currentColor" stroke-width="1.8"/>
                <path d="M12 22V10" stroke="currentColor" stroke-width="1.8"/>
                <path d="M12 10l4 4" stroke="currentColor" stroke-width="1.8"/>
                <path d="M12 10l-4 4" stroke="currentColor" stroke-width="1.8"/>
              </svg>
            </div>
          </div>
        </div>
        <div class="flex flex-col justify-center h-full items-start">
          <span class="text-2xl md:text-3xl font-black text-primary font-heading leading-none tracking-tight drop-shadow-sm">מצפן הלב</span>
          <span class="text-xs md:text-sm text-accentMuted font-body font-bold tracking-widest mt-0.5 whitespace-nowrap">אימון רגשי תודעתי</span>
        </div>
      </a>

      <!-- Desktop nav -->
      <div class="hidden md:flex items-center gap-8 lg:gap-10">
        <a href="/" class="text-lg font-bold transition-all duration-300 font-body relative px-2 py-1 outline-none text-primary/70 hover:text-accent">ראשי</a>

        <!-- Method dropdown (FIXED) -->
        <div class="relative group">
          <button
            type="button"
            class="text-lg font-bold transition-all duration-300 font-body relative px-2 py-1 outline-none text-primary/70 hover:text-accent"
            aria-haspopup="true"
            aria-label="השיטה"
          >
            השיטה
          </button>

          <!-- IMPORTANT: top-full + pt-3 prevents hover gap -->
          <div class="absolute right-0 top-full pt-3 w-[300px] opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition-opacity">
            <div class="rounded-2xl bg-white shadow-elegant border border-accent/15 overflow-hidden">
              <div class="p-3">
                {methodItems.map((mi) => (
                  <a
                    href={mi.href}
                    class="block px-4 py-3 rounded-xl hover:bg-accent/5 font-body font-bold text-primary/80 hover:text-primary transition-colors"
                  >
                    {mi.label}
                  </a>
                ))}
              </div>
            </div>
          </div>
        </div>

        <a href="/blog" class="text-lg font-bold transition-all duration-300 font-body relative px-2 py-1 outline-none text-primary/70 hover:text-accent">מאמרים</a>
        <a href="/about" class="text-lg font-bold transition-all duration-300 font-body relative px-2 py-1 outline-none text-primary/70 hover:text-accent">מי אני</a>

        <a
          href="/contact"
          class="bg-gradient-to-r from-accent to-accent2 text-white px-6 py-2.5 rounded-full font-body text-base font-bold hover:shadow-[0_4px_15px_rgba(212,175,55,0.4)] transition-all duration-300 shadow-md flex items-center gap-2 transform hover:-translate-y-0.5"
        >
          תיאום שיחה
          <span aria-hidden="true">←</span>
        </a>
      </div>

      <!-- Mobile button (pure CSS checkbox) -->
      <label for="mobile-nav-toggle" class="md:hidden text-primary p-2 hover:bg-accent/10 rounded-xl transition-colors cursor-pointer">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </label>
    </div>
  </div>

  <!-- Mobile menu (CSS-only) -->
  <input id="mobile-nav-toggle" type="checkbox" class="peer sr-only" />
  <div class="md:hidden bg-base border-t border-accent/20 absolute top-full left-0 w-full shadow-2xl z-[200] hidden peer-checked:block">
    <div class="px-6 py-6 space-y-3 flex flex-col">
      <a href="/" class="w-full text-right px-4 py-4 rounded-xl text-xl font-bold border-b border-accent/10 hover:bg-accent/5 transition-colors">ראשי</a>

      <div class="w-full">
        <div class="px-4 py-4 rounded-xl text-xl font-bold border-b border-accent/10 text-primary">השיטה</div>
        <div class="pr-4 pl-2 py-3 space-y-2 border-b border-accent/10">
          {methodItems.map((mi) => (
            <a href={mi.href} class="block px-4 py-3 rounded-xl hover:bg-accent/5 font-body font-bold text-primary/80 hover:text-primary transition-colors">
              {mi.label}
            </a>
          ))}
        </div>
      </div>

      <a href="/blog" class="w-full text-right px-4 py-4 rounded-xl text-xl font-bold border-b border-accent/10 hover:bg-accent/5 transition-colors">מאמרים</a>
      <a href="/about" class="w-full text-right px-4 py-4 rounded-xl text-xl font-bold border-b border-accent/10 hover:bg-accent/5 transition-colors">מי אני</a>
      <a href="/contact" class="w-full text-right px-4 py-4 rounded-xl text-xl font-bold hover:bg-accent/5 transition-colors">צור קשר</a>
    </div>
  </div>
</nav>
